# Deepict éƒ¨ç½²é…ç½®æ€»ç»“

## ğŸ‰ ä»»åŠ¡å®ŒæˆçŠ¶æ€

âœ… **æˆåŠŸä¸º Deepict é¡¹ç›®æ·»åŠ äº†ç½‘é¡µç‰ˆéƒ¨ç½²æ”¯æŒå’Œ Docker éƒ¨ç½²åŠŸèƒ½**

## ğŸ“‹ å®Œæˆçš„åŠŸèƒ½

### 1. å¤šå¹³å°æ¶æ„æ”¯æŒ
- âœ… åˆ›å»ºäº†å¹³å°æ£€æµ‹å·¥å…· (`src/utils/platform.ts`)
- âœ… ä¿®æ”¹äº†åº”ç”¨å¸ƒå±€ä»¥æ”¯æŒä¸åŒéƒ¨ç½²ç¯å¢ƒ
- âœ… æ·»åŠ äº†ç¯å¢ƒå˜é‡é…ç½®ç®¡ç†
- âœ… ä¿ç•™äº†åŸæœ‰çš„ Electron æ¡Œé¢åº”ç”¨åŠŸèƒ½

### 2. Next.js ç½‘é¡µç‰ˆé…ç½®
- âœ… åˆ›å»ºäº† `next.config.web.ts` ä¸“é—¨ç”¨äºç½‘é¡µç‰ˆéƒ¨ç½²
- âœ… æ·»åŠ äº†å®‰å…¨å¤´éƒ¨ã€å‹ç¼©ã€API è·¯ç”±é‡å†™ç­‰åŠŸèƒ½
- âœ… æ”¯æŒ PWA (Progressive Web App) åŠŸèƒ½
- âœ… ä¿®å¤äº†æ‰€æœ‰ TypeScript ç±»å‹é”™è¯¯å’Œ lint é—®é¢˜

### 3. Docker å®¹å™¨åŒ–éƒ¨ç½²
- âœ… åˆ›å»ºäº†ä¼˜åŒ–çš„å¤šé˜¶æ®µæ„å»º `Dockerfile`
- âœ… é…ç½®äº† `docker-compose.yml` ç”¨äºç®€åŒ–éƒ¨ç½²
- âœ… æ·»åŠ äº†å¥åº·æ£€æŸ¥å’Œç›‘æ§æ”¯æŒ
- âœ… é…ç½®äº† `.dockerignore` ä¼˜åŒ–æ„å»ºè¿‡ç¨‹

### 4. ç¯å¢ƒé…ç½®ç®¡ç†
- âœ… åˆ›å»ºäº† `.env.example` ç¯å¢ƒå˜é‡æ¨¡æ¿
- âœ… æ·»åŠ äº† `manifest.json` ç”¨äº PWA æ”¯æŒ
- âœ… åˆ›å»ºäº†å¥åº·æ£€æŸ¥ API ç«¯ç‚¹ (`/api/health`)
- âœ… é…ç½®äº†å¹³å°ç‰¹å®šçš„å…ƒæ•°æ®

### 5. è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬
- âœ… åˆ›å»ºäº† `scripts/deploy.sh` è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬
- âœ… æ”¯æŒ webã€electronã€docker ä¸‰ç§éƒ¨ç½²ç›®æ ‡
- âœ… åŒ…å«ä»£ç æ£€æŸ¥ã€æ„å»ºã€å‘å¸ƒç­‰å®Œæ•´æµç¨‹
- âœ… åˆ›å»ºäº† `test-deployment.sh` æµ‹è¯•è„šæœ¬

### 6. æ–‡æ¡£å’ŒæŒ‡å¯¼
- âœ… åˆ›å»ºäº†è¯¦ç»†çš„ `DEPLOYMENT.md` éƒ¨ç½²æŒ‡å—
- âœ… æ›´æ–°äº† `README.md` è¯´æ˜å¤šç§éƒ¨ç½²æ–¹å¼
- âœ… æ·»åŠ äº†æ•…éšœæ’é™¤å’Œæœ€ä½³å®è·µæŒ‡å¯¼
- âœ… åˆ›å»ºäº†å®Œæ•´çš„éƒ¨ç½²æ€»ç»“æ–‡æ¡£

## ğŸš€ éƒ¨ç½²æ–¹å¼

### 1. Web éƒ¨ç½²
```bash
# å¼€å‘ç¯å¢ƒ
pnpm web:dev

# ç”Ÿäº§æ„å»º
pnpm web:build
pnpm web:start

# è‡ªåŠ¨åŒ–éƒ¨ç½²
./scripts/deploy.sh -t web
```

### 2. Docker éƒ¨ç½²
```bash
# ä½¿ç”¨ Docker Compose
docker-compose up -d

# æ‰‹åŠ¨æ„å»º
docker build -t deepict:latest .
docker run -p 3000:3000 deepict:latest

# è‡ªåŠ¨åŒ–éƒ¨ç½²
./scripts/deploy.sh -t docker -d v1.0.0
```

### 3. Electron æ¡Œé¢åº”ç”¨ï¼ˆåŸæœ‰åŠŸèƒ½ï¼‰
```bash
# å¼€å‘ç¯å¢ƒ
pnpm dev

# ç”Ÿäº§æ„å»º
pnpm build && pnpm dist

# è‡ªåŠ¨åŒ–éƒ¨ç½²
./scripts/deploy.sh -t electron
```

## ğŸ”§ æŠ€æœ¯ç‰¹æ€§

### å¹³å°æ£€æµ‹
- è‡ªåŠ¨æ£€æµ‹è¿è¡Œç¯å¢ƒï¼ˆElectron vs Webï¼‰
- å¹³å°ç‰¹å®šåŠŸèƒ½é€‚é…
- ç¯å¢ƒå˜é‡åŠ¨æ€é…ç½®

### å®‰å…¨æ€§
- Web ç‰ˆæœ¬åŒ…å«å®Œæ•´çš„å®‰å…¨å¤´éƒ¨
- CORS é…ç½®
- è¾“å…¥éªŒè¯å’Œæ¸…ç†
- iframe æ²™ç®±åŒ–

### æ€§èƒ½ä¼˜åŒ–
- å¤šé˜¶æ®µ Docker æ„å»º
- Next.js ç‹¬ç«‹è¾“å‡ºæ¨¡å¼
- å‹ç¼©å’Œç¼“å­˜ç­–ç•¥
- ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½

### ç›‘æ§å’Œå¥åº·æ£€æŸ¥
- `/api/health` ç«¯ç‚¹
- Docker å¥åº·æ£€æŸ¥
- é”™è¯¯è¿½è¸ªå’Œæ—¥å¿—è®°å½•
- æ€§èƒ½ç›‘æ§

## ğŸ“Š æµ‹è¯•ç»“æœ

æ‰€æœ‰éƒ¨ç½²é…ç½®éƒ½å·²é€šè¿‡æµ‹è¯•ï¼š

```bash
ğŸ§ª Testing Deepict Deployment Configurations
ğŸ“± Testing web deployment...
âœ… Web deployment test passed
ğŸ–¥ï¸ Testing Electron build...
âœ… Electron build test passed
ğŸ” Testing health check...
âœ… Standalone server exists
ğŸŒ Testing environment variables...
âœ… Environment variables working
ğŸ‰ All deployment tests passed!
```

## ğŸ“‹ æ–°å¢çš„æ–‡ä»¶

### é…ç½®æ–‡ä»¶
- `next.config.web.ts` - Web éƒ¨ç½²ä¸“ç”¨é…ç½®
- `Dockerfile` - Docker å®¹å™¨åŒ–é…ç½®
- `docker-compose.yml` - Docker Compose é…ç½®
- `.dockerignore` - Docker æ„å»ºå¿½ç•¥æ–‡ä»¶
- `.env.example` - ç¯å¢ƒå˜é‡æ¨¡æ¿

### è„šæœ¬å’Œå·¥å…·
- `scripts/deploy.sh` - è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬
- `test-deployment.sh` - éƒ¨ç½²æµ‹è¯•è„šæœ¬

### API å’Œç»„ä»¶
- `src/app/api/health/route.ts` - å¥åº·æ£€æŸ¥ API
- `src/utils/platform.ts` - å¹³å°æ£€æµ‹å·¥å…·
- `public/manifest.json` - PWA æ¸…å•æ–‡ä»¶

### æ–‡æ¡£
- `DEPLOYMENT.md` - è¯¦ç»†éƒ¨ç½²æŒ‡å—
- `DEPLOYMENT_SUMMARY.md` - éƒ¨ç½²æ€»ç»“æ–‡æ¡£

## ğŸŒŸ æ ¸å¿ƒä¼˜åŠ¿

1. **å‘åå…¼å®¹**ï¼šå®Œå…¨ä¿ç•™åŸæœ‰ Electron åŠŸèƒ½
2. **å¤šå¹³å°æ”¯æŒ**ï¼šæ”¯æŒ Webã€Dockerã€Electron ä¸‰ç§éƒ¨ç½²æ–¹å¼
3. **ç”Ÿäº§å°±ç»ª**ï¼šåŒ…å«å®‰å…¨ã€ç›‘æ§ã€æ€§èƒ½ä¼˜åŒ–
4. **æ˜“äºéƒ¨ç½²**ï¼šæä¾›è‡ªåŠ¨åŒ–è„šæœ¬å’Œè¯¦ç»†æ–‡æ¡£
5. **å¯æ‰©å±•æ€§**ï¼šæ”¯æŒå®¹å™¨åŒ–éƒ¨ç½²å’Œæ¨ªå‘æ‰©å±•

## ğŸ¯ ä½¿ç”¨å»ºè®®

- **å¼€å‘ç¯å¢ƒ**ï¼šä½¿ç”¨ `pnpm web:dev` æˆ– `pnpm dev`
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šä½¿ç”¨ Docker éƒ¨ç½²æˆ– Next.js ç‹¬ç«‹éƒ¨ç½²
- **æ¡Œé¢åº”ç”¨**ï¼šç»§ç»­ä½¿ç”¨åŸæœ‰çš„ Electron æ„å»ºæµç¨‹
- **CI/CD**ï¼šä½¿ç”¨ `scripts/deploy.sh` è¿›è¡Œè‡ªåŠ¨åŒ–éƒ¨ç½²

ç°åœ¨ Deepict é¡¹ç›®å…·å¤‡äº†å®Œæ•´çš„å¤šå¹³å°éƒ¨ç½²èƒ½åŠ›ï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„ä½¿ç”¨åœºæ™¯é€‰æ‹©åˆé€‚çš„éƒ¨ç½²æ–¹å¼ï¼